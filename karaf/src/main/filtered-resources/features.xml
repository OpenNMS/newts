<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" name="newts-${project.version}">

    <feature name="netty" description="Netty IO library" version="${nettyVersion}">
      <bundle dependency="true">mvn:io.netty/netty-handler/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-common/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-buffer/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-transport/${nettyVersion}</bundle>
      <bundle dependency="true">mvn:io.netty/netty-codec/${nettyVersion}</bundle>
    </feature>

    <feature name="cassandra-driver" description="Datastax Cassandra Driver" version="${cassandraDriverVersion}">
      <feature>netty</feature>
      <bundle dependency="true">mvn:io.dropwizard.metrics/metrics-core/${metricsVersion}</bundle>
      <bundle dependency="true">mvn:org.codehaus.jackson/jackson-core-asl/${jackson1Version}</bundle>
      <bundle dependency="true">mvn:org.codehaus.jackson/jackson-mapper-asl/${jackson1Version}</bundle>
      <bundle dependency="true">mvn:com.datastax.cassandra/cassandra-driver-core/${cassandraDriverVersion}</bundle>
    </feature>

    <feature name="fastxml-jackson" description="Jackson JSON library" version="${jackson2Version}">
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-core/${jackson2Version}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-databind/${jackson2Version}</bundle>
      <bundle dependency="true">mvn:com.fasterxml.jackson.core/jackson-annotations/${jackson2Version}</bundle>
    </feature>

    <feature name="guava" description="Guava" version="25.1.0">
        <feature prerequisite="true">wrap</feature>
        <bundle dependency="true">mvn:com.google.guava/guava/${guavaVersion}</bundle>
        <bundle dependency="true">wrap:mvn:org.codehaus.mojo/animal-sniffer-annotations/1.14</bundle>
        <bundle dependency="true">wrap:mvn:com.google.errorprone/error_prone_annotations/2.1.3</bundle>
        <bundle dependency="true">wrap:mvn:org.checkerframework/checker-qual/2.0.0</bundle>
        <bundle dependency="true">wrap:mvn:com.google.j2objc/j2objc-annotations/1.1</bundle>
    </feature>

    <feature name="newts-api" description="Newts API" version="${project.version}">
      <feature>fastxml-jackson</feature>
      <feature version="25.1.0" prerequisite="true">guava</feature>
      <bundle dependency="true">mvn:org.apache.commons/commons-jexl3/${jexlVersion}</bundle>
      <bundle>mvn:org.opennms.newts/newts-api/${project.version}</bundle>
      <bundle>mvn:org.opennms.newts/newts-aggregate/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra-common" description="Newts Cassandra Common" version="${project.version}">
      <feature>newts-api</feature>
      <feature>cassandra-driver</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra-common/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra" description="Newts Cassandra Repository" version="${project.version}">
      <feature>newts-cassandra-common</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra/${project.version}</bundle>
    </feature>

    <feature name="newts-cassandra-search" description="Newts Cassandra Search" version="${project.version}">
      <feature>newts-cassandra-common</feature>
      <bundle>mvn:org.opennms.newts/newts-cassandra-search/${project.version}</bundle>
    </feature>

</features>
